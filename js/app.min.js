// Yandex map
ymaps.ready(init);
var myMap,
  myPlacemark;

function init() {
  myMap = new ymaps.Map("map", {
    center: [59.947041, 30.385038],
    zoom: 11
  });

  var myPlacemark = new ymaps.Placemark([59.947041, 30.385038], {}, {
    iconLayout: 'default#image',
    iconImageHref: '../img/icons/map-marker.svg',
    iconImageSize: [57, 46],
    iconImageOffset: [-30, -42]
  });

  myMap.geoObjects.add(myPlacemark);
  myMap.controls.remove('zoomControl');
  myMap.controls.remove('searchControl');
  myMap.controls.remove('trafficControl');
  myMap.controls.remove('geolocationControl');
  myMap.controls.remove('typeSelector');
}

//Hamburger menu ;)
const hamburgerMenu = document.querySelector('#hamburger-nav');
const overlay = document.querySelector('.overlay');
const close = document.querySelector('.overlay__close');


hamburgerMenu.addEventListener('click', function (event) {
  event.preventDefault();
  overlay.classList.add('overlay__show');
});

close.addEventListener('click', function (event) {
  event.preventDefault();
  overlay.classList.remove('overlay__show');
});

overlay.addEventListener('click', function (event) {
  if (event.target.className == 'overlay overlay__show') {
    overlay.classList.remove('overlay__show');
  }
});

// Acco team
const accordionName = document.querySelectorAll('.accordion__name');

accordionName.forEach(function (element) {
  element.addEventListener('click', function (event) {
    event.preventDefault();

    let accordionActive = document.querySelector('.accordion__active');
    const accordionItem = element.parentElement;
    let accordionItemClass = accordionItem.classList;
    let accordionActiveText;
    if (accordionActive == null) {
      accordionItemClass.add('accordion__active');
    }else {
      if (!accordionItemClass.contains('accordion__active')) {
        accordionActive.classList.remove('accordion__active');
        accordionItemText = accordionItem.childNodes[3];
        accordionItemText.style.transitionDelay = '.15s';
        console.log(accordionItem.style);
        accordionItemClass.add('accordion__active');
      } else {
        accordionItemClass.remove('accordion__active');
      }
    }
  })
});

// Acco menu
const menuTitle = document.querySelectorAll('.menu__item-title');

menuTitle.forEach(function(element) {
  element.addEventListener('click', function (event) {
    event.preventDefault();

    menuItem = element.parentElement.parentElement;
    menuItemClass = menuItem.classList;

    const menuListChild = element.parentElement.parentElement.parentElement.childNodes;
    const menuText = menuItem.childNodes[3].childNodes[1];
    const menuTextWrapper = menuItem.childNodes[3];
    let menuActiveText;
    let menuActiveTextWrapper;

    menuActive = document.querySelector('.menu__item-active');
    if (menuActive == null) {
      menuItemClass.add('menu__item-active');
      menuTextWrapper.style.transitionDelay = '0s';
      menuText.style.transitionDelay = '.3s';
    }else {
      if (!menuItemClass.contains('menu__item-active')) {
        menuActiveText = menuActive.childNodes[3].childNodes[1];
        menuActiveTextWrapper = menuActive.childNodes[3];

        menuActiveText.style.transitionDelay = '0s';
        menuActiveTextWrapper.style.transitionDelay = '.2s';

        menuActive.classList.remove('menu__item-active');
        menuItemClass.add('menu__item-active');
        menuTextWrapper.style.transitionDelay = '.2s';
        menuText.style.transitionDelay = '.5s';
      }else {
        menuTextWrapper.style.transitionDelay = '.2s';
        menuText.style.transitionDelay = '0s';
        menuItemClass.remove('menu__item-active');
      }
      
    }
  })
});

// Slider

function moveSlide(container, number) {
  const sliderList = container.find('.slider__list');
  const sliderItem = sliderList.children();
  let slideActive = container.find('.slider__active');

  sliderList.css('left', -number * 100 + '%');
  slideActive.removeClass('slider__active');
  sliderItem.eq(number).addClass('slider__active');
}

$('.slider__list').swipe({
  swipeLeft: function () {
    let $this = $(this);
    const sliderContainer = $this.closest('.slider__container');
    let nextSlide = sliderContainer.find('.slider__active').next();
    if (nextSlide.length) {
      let slideNum = nextSlide.index();
      moveSlide(sliderContainer, slideNum);
    } else {
      moveSlide(sliderContainer, 0);
    }
  },
  swipeRight: function () {
    let $this = $(this);
    const sliderContainer = $this.closest('.slider__container');
    let prevSlide = sliderContainer.find('.slider__active').prev();
    if (prevSlide.length) {
      let slideNum = prevSlide.index();
      moveSlide(sliderContainer, slideNum);
    } else {
      moveSlide(sliderContainer, sliderContainer.find('.slider__item:last-child').index());
    }
  }
})

$('.arrow__link').on('click', function (event) {
  event.preventDefault();

  let $this = $(this);
  const sliderContainer = $this.closest('.slider__container');
  
  if ($this.hasClass('arrow__next')) {
    let nextSlide = sliderContainer.find('.slider__active').next();
    if (nextSlide.length) {
      let slideNum = nextSlide.index();
      moveSlide(sliderContainer, slideNum);
    } else {
      moveSlide(sliderContainer, 0);
    }
    
  }else if ($this.hasClass('arrow__prev')){
    let prevSlide = sliderContainer.find('.slider__active').prev();
    if (prevSlide.length) {
      let slideNum = prevSlide.index();
      moveSlide(sliderContainer, slideNum);
    }else {
      moveSlide(sliderContainer, sliderContainer.find('.slider__item:last-child').index());
    }
  }
});

// One page scroll
let screen = $('.screen');
const pointsWrapper = $('.points');
for (let i = 0; i < screen.length; i++) {
  const pointDot = $('<li>', {
    class: 'points__dot'
  });
  const pointLink = $('<a>', {
    class: 'points__link',
    href: '#',
    'data-index': i
  })
  if (screen.eq(i).hasClass('section__active')) {
    pointDot.addClass('points__active');
  }
  pointsWrapper.append(pointDot);
  pointDot.append(pointLink);
}

let inScroll = false;
function ops(container, index) {
  if (inScroll) return;
  inScroll = true;
  
  const sections = container.children('.screen');
  const points = pointsWrapper.children('.points__dot');
  const sectionActive = container.find('.section__active');
  const pointActive = pointsWrapper.find('.points__active');

  container.css('transform', 'translateY(' + -index * 100 + '%)');
  sectionActive.removeClass('section__active');
  pointActive.removeClass('points__active');
  
  sections.eq(index).addClass('section__active');
  points.eq(index).addClass('points__active');
  points.eq(index).css('transition-delay', '.2s');

  transitionDuration = parseFloat(container.css('transition-duration'));
  setTimeout(() => {
    inScroll = false;
  }, transitionDuration * 1000 + 100);

  points.eq(index).css('transition-delay', '0s');
}


$('.maincontant').on('wheel', function (event) {
  $this = $(this);
  const deltaY = event.originalEvent.deltaY;
  const sectionActive = $this.find('.section__active');
  let sectionIndex = deltaY > 0 ? sectionActive.next().index() : sectionActive.prev().index();
  if (sectionActive.next().length && deltaY > 0) {
    ops($this, sectionIndex);
  } else if (sectionActive.prev().length && deltaY < 0) {
    ops($this, sectionIndex);
  }
});
$('.maincontant').swipe({
  swipeUp: function () {
    $this = $(this);
    
    sectionActive = $('.maincontant').find('.section__active');
    sectionIndex = sectionActive.next().index();
    if (sectionActive.next().length) {
      ops($this, sectionIndex);
    }
  },
  swipeDown: function () {
    $this = $(this);

    sectionActive = $('.maincontant').find('.section__active');
    sectionIndex = sectionActive.prev().index();
    if (sectionActive.prev().length) {
      ops($this, sectionIndex);
    }
  }
});

const findByIndex = (index) => {
  mainContent = $('.maincontant');
  dataIndex = parseInt(index.attr('data-index'));
  ops(mainContent, dataIndex);
}

$('.nav__link').on('click', function (event) {
  event.preventDefault();
  findByIndex($(this));
});

$('.overlay__link').on('click', function (event) {
  $this = $(this);
  overlayShow = $this.closest('.overlay__show');
  overlayShow.removeClass('overlay__show');
});

$('.points__link').on('click', function (event) {
  event.preventDefault();
  findByIndex($(this));
});

$('#to-order').on('click', function (event) {
  event.preventDefault();
  findByIndex($(this));
});

$('.welcome-link').on('click', function (event) {
  event.preventDefault();
  findByIndex($(this));
});

// reviews popup
let reviewsText = 'Мысли все о них и о них, о них и о них. Нельзя устоять, ' +
'невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, ' +
'котлетка такой сочной, а сыр таким расплавленным. Мысли все о них и о них, о них и о ' +
'них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть ' +
'такими мягкими, котлетка такой сочной, а сыр таким расплавленным.';
$('.reviews__btn').on('click', function (event) {
  event.preventDefault();
  const $this = $(this);
  const textWrapper = $this.closest('.reviews__item-text');
  const reviewsName = textWrapper.find('.reviews__name').clone();
  

  const modalBg = $('<div>', { class: 'modal__bg' });
  const modal =     $('<div>', { class: 'modal' });
  const modalText = $('<p>', { class: 'reviews__text modal__text' });
  const modalClose = $('<a>', {
    class: 'overlay__close modal__close', 
    href: '#'
  });
  $('body').append(modalBg.append(modal));
  modalBg.fadeIn(500);
  modalText.text(reviewsText);
  modal.append(reviewsName);
  modal.append(modalText);
  modal.append(modalClose);
  
  modalBg.on('click', function (event) {
    ourTarget = event.target;
    if ($(ourTarget).hasClass('modal__bg')){
      modalBg.fadeOut(500, () => modalBg.remove());
    }
  })
  modalClose.on('click', function (ev) {
    ev.preventDefault();
    modalBg.fadeOut(500, () => modalBg.remove());
  })
  
});


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBZYW5kZXggbWFwXHJcbnltYXBzLnJlYWR5KGluaXQpO1xyXG52YXIgbXlNYXAsXHJcbiAgbXlQbGFjZW1hcms7XHJcblxyXG5mdW5jdGlvbiBpbml0KCkge1xyXG4gIG15TWFwID0gbmV3IHltYXBzLk1hcChcIm1hcFwiLCB7XHJcbiAgICBjZW50ZXI6IFs1OS45NDcwNDEsIDMwLjM4NTAzOF0sXHJcbiAgICB6b29tOiAxMVxyXG4gIH0pO1xyXG5cclxuICB2YXIgbXlQbGFjZW1hcmsgPSBuZXcgeW1hcHMuUGxhY2VtYXJrKFs1OS45NDcwNDEsIDMwLjM4NTAzOF0sIHt9LCB7XHJcbiAgICBpY29uTGF5b3V0OiAnZGVmYXVsdCNpbWFnZScsXHJcbiAgICBpY29uSW1hZ2VIcmVmOiAnLi4vaW1nL2ljb25zL21hcC1tYXJrZXIuc3ZnJyxcclxuICAgIGljb25JbWFnZVNpemU6IFs1NywgNDZdLFxyXG4gICAgaWNvbkltYWdlT2Zmc2V0OiBbLTMwLCAtNDJdXHJcbiAgfSk7XHJcblxyXG4gIG15TWFwLmdlb09iamVjdHMuYWRkKG15UGxhY2VtYXJrKTtcclxuICBteU1hcC5jb250cm9scy5yZW1vdmUoJ3pvb21Db250cm9sJyk7XHJcbiAgbXlNYXAuY29udHJvbHMucmVtb3ZlKCdzZWFyY2hDb250cm9sJyk7XHJcbiAgbXlNYXAuY29udHJvbHMucmVtb3ZlKCd0cmFmZmljQ29udHJvbCcpO1xyXG4gIG15TWFwLmNvbnRyb2xzLnJlbW92ZSgnZ2VvbG9jYXRpb25Db250cm9sJyk7XHJcbiAgbXlNYXAuY29udHJvbHMucmVtb3ZlKCd0eXBlU2VsZWN0b3InKTtcclxufVxyXG5cclxuLy9IYW1idXJnZXIgbWVudSA7KVxyXG5jb25zdCBoYW1idXJnZXJNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hhbWJ1cmdlci1uYXYnKTtcclxuY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5Jyk7XHJcbmNvbnN0IGNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm92ZXJsYXlfX2Nsb3NlJyk7XHJcblxyXG5cclxuaGFtYnVyZ2VyTWVudS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdvdmVybGF5X19zaG93Jyk7XHJcbn0pO1xyXG5cclxuY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmxheV9fc2hvdycpO1xyXG59KTtcclxuXHJcbm92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTmFtZSA9PSAnb3ZlcmxheSBvdmVybGF5X19zaG93Jykge1xyXG4gICAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdvdmVybGF5X19zaG93Jyk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIEFjY28gdGVhbVxyXG5jb25zdCBhY2NvcmRpb25OYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFjY29yZGlvbl9fbmFtZScpO1xyXG5cclxuYWNjb3JkaW9uTmFtZS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBsZXQgYWNjb3JkaW9uQWN0aXZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjY29yZGlvbl9fYWN0aXZlJyk7XHJcbiAgICBjb25zdCBhY2NvcmRpb25JdGVtID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xyXG4gICAgbGV0IGFjY29yZGlvbkl0ZW1DbGFzcyA9IGFjY29yZGlvbkl0ZW0uY2xhc3NMaXN0O1xyXG4gICAgbGV0IGFjY29yZGlvbkFjdGl2ZVRleHQ7XHJcbiAgICBpZiAoYWNjb3JkaW9uQWN0aXZlID09IG51bGwpIHtcclxuICAgICAgYWNjb3JkaW9uSXRlbUNsYXNzLmFkZCgnYWNjb3JkaW9uX19hY3RpdmUnKTtcclxuICAgIH1lbHNlIHtcclxuICAgICAgaWYgKCFhY2NvcmRpb25JdGVtQ2xhc3MuY29udGFpbnMoJ2FjY29yZGlvbl9fYWN0aXZlJykpIHtcclxuICAgICAgICBhY2NvcmRpb25BY3RpdmUuY2xhc3NMaXN0LnJlbW92ZSgnYWNjb3JkaW9uX19hY3RpdmUnKTtcclxuICAgICAgICBhY2NvcmRpb25JdGVtVGV4dCA9IGFjY29yZGlvbkl0ZW0uY2hpbGROb2Rlc1szXTtcclxuICAgICAgICBhY2NvcmRpb25JdGVtVGV4dC5zdHlsZS50cmFuc2l0aW9uRGVsYXkgPSAnLjE1cyc7XHJcbiAgICAgICAgY29uc29sZS5sb2coYWNjb3JkaW9uSXRlbS5zdHlsZSk7XHJcbiAgICAgICAgYWNjb3JkaW9uSXRlbUNsYXNzLmFkZCgnYWNjb3JkaW9uX19hY3RpdmUnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhY2NvcmRpb25JdGVtQ2xhc3MucmVtb3ZlKCdhY2NvcmRpb25fX2FjdGl2ZScpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSlcclxufSk7XHJcblxyXG4vLyBBY2NvIG1lbnVcclxuY29uc3QgbWVudVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnVfX2l0ZW0tdGl0bGUnKTtcclxuXHJcbm1lbnVUaXRsZS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIG1lbnVJdGVtID0gZWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICBtZW51SXRlbUNsYXNzID0gbWVudUl0ZW0uY2xhc3NMaXN0O1xyXG5cclxuICAgIGNvbnN0IG1lbnVMaXN0Q2hpbGQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNoaWxkTm9kZXM7XHJcbiAgICBjb25zdCBtZW51VGV4dCA9IG1lbnVJdGVtLmNoaWxkTm9kZXNbM10uY2hpbGROb2Rlc1sxXTtcclxuICAgIGNvbnN0IG1lbnVUZXh0V3JhcHBlciA9IG1lbnVJdGVtLmNoaWxkTm9kZXNbM107XHJcbiAgICBsZXQgbWVudUFjdGl2ZVRleHQ7XHJcbiAgICBsZXQgbWVudUFjdGl2ZVRleHRXcmFwcGVyO1xyXG5cclxuICAgIG1lbnVBY3RpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudV9faXRlbS1hY3RpdmUnKTtcclxuICAgIGlmIChtZW51QWN0aXZlID09IG51bGwpIHtcclxuICAgICAgbWVudUl0ZW1DbGFzcy5hZGQoJ21lbnVfX2l0ZW0tYWN0aXZlJyk7XHJcbiAgICAgIG1lbnVUZXh0V3JhcHBlci5zdHlsZS50cmFuc2l0aW9uRGVsYXkgPSAnMHMnO1xyXG4gICAgICBtZW51VGV4dC5zdHlsZS50cmFuc2l0aW9uRGVsYXkgPSAnLjNzJztcclxuICAgIH1lbHNlIHtcclxuICAgICAgaWYgKCFtZW51SXRlbUNsYXNzLmNvbnRhaW5zKCdtZW51X19pdGVtLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgbWVudUFjdGl2ZVRleHQgPSBtZW51QWN0aXZlLmNoaWxkTm9kZXNbM10uY2hpbGROb2Rlc1sxXTtcclxuICAgICAgICBtZW51QWN0aXZlVGV4dFdyYXBwZXIgPSBtZW51QWN0aXZlLmNoaWxkTm9kZXNbM107XHJcblxyXG4gICAgICAgIG1lbnVBY3RpdmVUZXh0LnN0eWxlLnRyYW5zaXRpb25EZWxheSA9ICcwcyc7XHJcbiAgICAgICAgbWVudUFjdGl2ZVRleHRXcmFwcGVyLnN0eWxlLnRyYW5zaXRpb25EZWxheSA9ICcuMnMnO1xyXG5cclxuICAgICAgICBtZW51QWN0aXZlLmNsYXNzTGlzdC5yZW1vdmUoJ21lbnVfX2l0ZW0tYWN0aXZlJyk7XHJcbiAgICAgICAgbWVudUl0ZW1DbGFzcy5hZGQoJ21lbnVfX2l0ZW0tYWN0aXZlJyk7XHJcbiAgICAgICAgbWVudVRleHRXcmFwcGVyLnN0eWxlLnRyYW5zaXRpb25EZWxheSA9ICcuMnMnO1xyXG4gICAgICAgIG1lbnVUZXh0LnN0eWxlLnRyYW5zaXRpb25EZWxheSA9ICcuNXMnO1xyXG4gICAgICB9ZWxzZSB7XHJcbiAgICAgICAgbWVudVRleHRXcmFwcGVyLnN0eWxlLnRyYW5zaXRpb25EZWxheSA9ICcuMnMnO1xyXG4gICAgICAgIG1lbnVUZXh0LnN0eWxlLnRyYW5zaXRpb25EZWxheSA9ICcwcyc7XHJcbiAgICAgICAgbWVudUl0ZW1DbGFzcy5yZW1vdmUoJ21lbnVfX2l0ZW0tYWN0aXZlJyk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICB9XHJcbiAgfSlcclxufSk7XHJcblxyXG4vLyBTbGlkZXJcclxuXHJcbmZ1bmN0aW9uIG1vdmVTbGlkZShjb250YWluZXIsIG51bWJlcikge1xyXG4gIGNvbnN0IHNsaWRlckxpc3QgPSBjb250YWluZXIuZmluZCgnLnNsaWRlcl9fbGlzdCcpO1xyXG4gIGNvbnN0IHNsaWRlckl0ZW0gPSBzbGlkZXJMaXN0LmNoaWxkcmVuKCk7XHJcbiAgbGV0IHNsaWRlQWN0aXZlID0gY29udGFpbmVyLmZpbmQoJy5zbGlkZXJfX2FjdGl2ZScpO1xyXG5cclxuICBzbGlkZXJMaXN0LmNzcygnbGVmdCcsIC1udW1iZXIgKiAxMDAgKyAnJScpO1xyXG4gIHNsaWRlQWN0aXZlLnJlbW92ZUNsYXNzKCdzbGlkZXJfX2FjdGl2ZScpO1xyXG4gIHNsaWRlckl0ZW0uZXEobnVtYmVyKS5hZGRDbGFzcygnc2xpZGVyX19hY3RpdmUnKTtcclxufVxyXG5cclxuJCgnLnNsaWRlcl9fbGlzdCcpLnN3aXBlKHtcclxuICBzd2lwZUxlZnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICBjb25zdCBzbGlkZXJDb250YWluZXIgPSAkdGhpcy5jbG9zZXN0KCcuc2xpZGVyX19jb250YWluZXInKTtcclxuICAgIGxldCBuZXh0U2xpZGUgPSBzbGlkZXJDb250YWluZXIuZmluZCgnLnNsaWRlcl9fYWN0aXZlJykubmV4dCgpO1xyXG4gICAgaWYgKG5leHRTbGlkZS5sZW5ndGgpIHtcclxuICAgICAgbGV0IHNsaWRlTnVtID0gbmV4dFNsaWRlLmluZGV4KCk7XHJcbiAgICAgIG1vdmVTbGlkZShzbGlkZXJDb250YWluZXIsIHNsaWRlTnVtKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG1vdmVTbGlkZShzbGlkZXJDb250YWluZXIsIDApO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgc3dpcGVSaWdodDogZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0ICR0aGlzID0gJCh0aGlzKTtcclxuICAgIGNvbnN0IHNsaWRlckNvbnRhaW5lciA9ICR0aGlzLmNsb3Nlc3QoJy5zbGlkZXJfX2NvbnRhaW5lcicpO1xyXG4gICAgbGV0IHByZXZTbGlkZSA9IHNsaWRlckNvbnRhaW5lci5maW5kKCcuc2xpZGVyX19hY3RpdmUnKS5wcmV2KCk7XHJcbiAgICBpZiAocHJldlNsaWRlLmxlbmd0aCkge1xyXG4gICAgICBsZXQgc2xpZGVOdW0gPSBwcmV2U2xpZGUuaW5kZXgoKTtcclxuICAgICAgbW92ZVNsaWRlKHNsaWRlckNvbnRhaW5lciwgc2xpZGVOdW0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbW92ZVNsaWRlKHNsaWRlckNvbnRhaW5lciwgc2xpZGVyQ29udGFpbmVyLmZpbmQoJy5zbGlkZXJfX2l0ZW06bGFzdC1jaGlsZCcpLmluZGV4KCkpO1xyXG4gICAgfVxyXG4gIH1cclxufSlcclxuXHJcbiQoJy5hcnJvd19fbGluaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gIGxldCAkdGhpcyA9ICQodGhpcyk7XHJcbiAgY29uc3Qgc2xpZGVyQ29udGFpbmVyID0gJHRoaXMuY2xvc2VzdCgnLnNsaWRlcl9fY29udGFpbmVyJyk7XHJcbiAgXHJcbiAgaWYgKCR0aGlzLmhhc0NsYXNzKCdhcnJvd19fbmV4dCcpKSB7XHJcbiAgICBsZXQgbmV4dFNsaWRlID0gc2xpZGVyQ29udGFpbmVyLmZpbmQoJy5zbGlkZXJfX2FjdGl2ZScpLm5leHQoKTtcclxuICAgIGlmIChuZXh0U2xpZGUubGVuZ3RoKSB7XHJcbiAgICAgIGxldCBzbGlkZU51bSA9IG5leHRTbGlkZS5pbmRleCgpO1xyXG4gICAgICBtb3ZlU2xpZGUoc2xpZGVyQ29udGFpbmVyLCBzbGlkZU51bSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBtb3ZlU2xpZGUoc2xpZGVyQ29udGFpbmVyLCAwKTtcclxuICAgIH1cclxuICAgIFxyXG4gIH1lbHNlIGlmICgkdGhpcy5oYXNDbGFzcygnYXJyb3dfX3ByZXYnKSl7XHJcbiAgICBsZXQgcHJldlNsaWRlID0gc2xpZGVyQ29udGFpbmVyLmZpbmQoJy5zbGlkZXJfX2FjdGl2ZScpLnByZXYoKTtcclxuICAgIGlmIChwcmV2U2xpZGUubGVuZ3RoKSB7XHJcbiAgICAgIGxldCBzbGlkZU51bSA9IHByZXZTbGlkZS5pbmRleCgpO1xyXG4gICAgICBtb3ZlU2xpZGUoc2xpZGVyQ29udGFpbmVyLCBzbGlkZU51bSk7XHJcbiAgICB9ZWxzZSB7XHJcbiAgICAgIG1vdmVTbGlkZShzbGlkZXJDb250YWluZXIsIHNsaWRlckNvbnRhaW5lci5maW5kKCcuc2xpZGVyX19pdGVtOmxhc3QtY2hpbGQnKS5pbmRleCgpKTtcclxuICAgIH1cclxuICB9XHJcbn0pO1xyXG5cclxuLy8gT25lIHBhZ2Ugc2Nyb2xsXHJcbmxldCBzY3JlZW4gPSAkKCcuc2NyZWVuJyk7XHJcbmNvbnN0IHBvaW50c1dyYXBwZXIgPSAkKCcucG9pbnRzJyk7XHJcbmZvciAobGV0IGkgPSAwOyBpIDwgc2NyZWVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgY29uc3QgcG9pbnREb3QgPSAkKCc8bGk+Jywge1xyXG4gICAgY2xhc3M6ICdwb2ludHNfX2RvdCdcclxuICB9KTtcclxuICBjb25zdCBwb2ludExpbmsgPSAkKCc8YT4nLCB7XHJcbiAgICBjbGFzczogJ3BvaW50c19fbGluaycsXHJcbiAgICBocmVmOiAnIycsXHJcbiAgICAnZGF0YS1pbmRleCc6IGlcclxuICB9KVxyXG4gIGlmIChzY3JlZW4uZXEoaSkuaGFzQ2xhc3MoJ3NlY3Rpb25fX2FjdGl2ZScpKSB7XHJcbiAgICBwb2ludERvdC5hZGRDbGFzcygncG9pbnRzX19hY3RpdmUnKTtcclxuICB9XHJcbiAgcG9pbnRzV3JhcHBlci5hcHBlbmQocG9pbnREb3QpO1xyXG4gIHBvaW50RG90LmFwcGVuZChwb2ludExpbmspO1xyXG59XHJcblxyXG5sZXQgaW5TY3JvbGwgPSBmYWxzZTtcclxuZnVuY3Rpb24gb3BzKGNvbnRhaW5lciwgaW5kZXgpIHtcclxuICBpZiAoaW5TY3JvbGwpIHJldHVybjtcclxuICBpblNjcm9sbCA9IHRydWU7XHJcbiAgXHJcbiAgY29uc3Qgc2VjdGlvbnMgPSBjb250YWluZXIuY2hpbGRyZW4oJy5zY3JlZW4nKTtcclxuICBjb25zdCBwb2ludHMgPSBwb2ludHNXcmFwcGVyLmNoaWxkcmVuKCcucG9pbnRzX19kb3QnKTtcclxuICBjb25zdCBzZWN0aW9uQWN0aXZlID0gY29udGFpbmVyLmZpbmQoJy5zZWN0aW9uX19hY3RpdmUnKTtcclxuICBjb25zdCBwb2ludEFjdGl2ZSA9IHBvaW50c1dyYXBwZXIuZmluZCgnLnBvaW50c19fYWN0aXZlJyk7XHJcblxyXG4gIGNvbnRhaW5lci5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGVZKCcgKyAtaW5kZXggKiAxMDAgKyAnJSknKTtcclxuICBzZWN0aW9uQWN0aXZlLnJlbW92ZUNsYXNzKCdzZWN0aW9uX19hY3RpdmUnKTtcclxuICBwb2ludEFjdGl2ZS5yZW1vdmVDbGFzcygncG9pbnRzX19hY3RpdmUnKTtcclxuICBcclxuICBzZWN0aW9ucy5lcShpbmRleCkuYWRkQ2xhc3MoJ3NlY3Rpb25fX2FjdGl2ZScpO1xyXG4gIHBvaW50cy5lcShpbmRleCkuYWRkQ2xhc3MoJ3BvaW50c19fYWN0aXZlJyk7XHJcbiAgcG9pbnRzLmVxKGluZGV4KS5jc3MoJ3RyYW5zaXRpb24tZGVsYXknLCAnLjJzJyk7XHJcblxyXG4gIHRyYW5zaXRpb25EdXJhdGlvbiA9IHBhcnNlRmxvYXQoY29udGFpbmVyLmNzcygndHJhbnNpdGlvbi1kdXJhdGlvbicpKTtcclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIGluU2Nyb2xsID0gZmFsc2U7XHJcbiAgfSwgdHJhbnNpdGlvbkR1cmF0aW9uICogMTAwMCArIDEwMCk7XHJcblxyXG4gIHBvaW50cy5lcShpbmRleCkuY3NzKCd0cmFuc2l0aW9uLWRlbGF5JywgJzBzJyk7XHJcbn1cclxuXHJcblxyXG4kKCcubWFpbmNvbnRhbnQnKS5vbignd2hlZWwnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAkdGhpcyA9ICQodGhpcyk7XHJcbiAgY29uc3QgZGVsdGFZID0gZXZlbnQub3JpZ2luYWxFdmVudC5kZWx0YVk7XHJcbiAgY29uc3Qgc2VjdGlvbkFjdGl2ZSA9ICR0aGlzLmZpbmQoJy5zZWN0aW9uX19hY3RpdmUnKTtcclxuICBsZXQgc2VjdGlvbkluZGV4ID0gZGVsdGFZID4gMCA/IHNlY3Rpb25BY3RpdmUubmV4dCgpLmluZGV4KCkgOiBzZWN0aW9uQWN0aXZlLnByZXYoKS5pbmRleCgpO1xyXG4gIGlmIChzZWN0aW9uQWN0aXZlLm5leHQoKS5sZW5ndGggJiYgZGVsdGFZID4gMCkge1xyXG4gICAgb3BzKCR0aGlzLCBzZWN0aW9uSW5kZXgpO1xyXG4gIH0gZWxzZSBpZiAoc2VjdGlvbkFjdGl2ZS5wcmV2KCkubGVuZ3RoICYmIGRlbHRhWSA8IDApIHtcclxuICAgIG9wcygkdGhpcywgc2VjdGlvbkluZGV4KTtcclxuICB9XHJcbn0pO1xyXG4kKCcubWFpbmNvbnRhbnQnKS5zd2lwZSh7XHJcbiAgc3dpcGVVcDogZnVuY3Rpb24gKCkge1xyXG4gICAgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgXHJcbiAgICBzZWN0aW9uQWN0aXZlID0gJCgnLm1haW5jb250YW50JykuZmluZCgnLnNlY3Rpb25fX2FjdGl2ZScpO1xyXG4gICAgc2VjdGlvbkluZGV4ID0gc2VjdGlvbkFjdGl2ZS5uZXh0KCkuaW5kZXgoKTtcclxuICAgIGlmIChzZWN0aW9uQWN0aXZlLm5leHQoKS5sZW5ndGgpIHtcclxuICAgICAgb3BzKCR0aGlzLCBzZWN0aW9uSW5kZXgpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgc3dpcGVEb3duOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAkdGhpcyA9ICQodGhpcyk7XHJcblxyXG4gICAgc2VjdGlvbkFjdGl2ZSA9ICQoJy5tYWluY29udGFudCcpLmZpbmQoJy5zZWN0aW9uX19hY3RpdmUnKTtcclxuICAgIHNlY3Rpb25JbmRleCA9IHNlY3Rpb25BY3RpdmUucHJldigpLmluZGV4KCk7XHJcbiAgICBpZiAoc2VjdGlvbkFjdGl2ZS5wcmV2KCkubGVuZ3RoKSB7XHJcbiAgICAgIG9wcygkdGhpcywgc2VjdGlvbkluZGV4KTtcclxuICAgIH1cclxuICB9XHJcbn0pO1xyXG5cclxuY29uc3QgZmluZEJ5SW5kZXggPSAoaW5kZXgpID0+IHtcclxuICBtYWluQ29udGVudCA9ICQoJy5tYWluY29udGFudCcpO1xyXG4gIGRhdGFJbmRleCA9IHBhcnNlSW50KGluZGV4LmF0dHIoJ2RhdGEtaW5kZXgnKSk7XHJcbiAgb3BzKG1haW5Db250ZW50LCBkYXRhSW5kZXgpO1xyXG59XHJcblxyXG4kKCcubmF2X19saW5rJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICBmaW5kQnlJbmRleCgkKHRoaXMpKTtcclxufSk7XHJcblxyXG4kKCcub3ZlcmxheV9fbGluaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICR0aGlzID0gJCh0aGlzKTtcclxuICBvdmVybGF5U2hvdyA9ICR0aGlzLmNsb3Nlc3QoJy5vdmVybGF5X19zaG93Jyk7XHJcbiAgb3ZlcmxheVNob3cucmVtb3ZlQ2xhc3MoJ292ZXJsYXlfX3Nob3cnKTtcclxufSk7XHJcblxyXG4kKCcucG9pbnRzX19saW5rJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICBmaW5kQnlJbmRleCgkKHRoaXMpKTtcclxufSk7XHJcblxyXG4kKCcjdG8tb3JkZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGZpbmRCeUluZGV4KCQodGhpcykpO1xyXG59KTtcclxuXHJcbiQoJy53ZWxjb21lLWxpbmsnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGZpbmRCeUluZGV4KCQodGhpcykpO1xyXG59KTtcclxuXHJcbi8vIHJldmlld3MgcG9wdXBcclxubGV0IHJldmlld3NUZXh0ID0gJ9Cc0YvRgdC70Lgg0LLRgdC1INC+INC90LjRhSDQuCDQviDQvdC40YUsINC+INC90LjRhSDQuCDQviDQvdC40YUuINCd0LXQu9GM0LfRjyDRg9GB0YLQvtGP0YLRjCwgJyArXHJcbifQvdC10LLQvtC30LzQvtC20L3QviDQt9Cw0LHRi9GC0YwuLi4g0J3QuNC60L7Qs9C00LAg0L3QtSDQtNGD0LzQsNC7LCDRh9GC0L4g0LHRg9C70L7Rh9C60Lgg0LzQvtCz0YPRgiDQsdGL0YLRjCDRgtCw0LrQuNC80Lgg0LzRj9Cz0LrQuNC80LgsICcgK1xyXG4n0LrQvtGC0LvQtdGC0LrQsCDRgtCw0LrQvtC5INGB0L7Rh9C90L7QuSwg0LAg0YHRi9GAINGC0LDQutC40Lwg0YDQsNGB0L/Qu9Cw0LLQu9C10L3QvdGL0LwuINCc0YvRgdC70Lgg0LLRgdC1INC+INC90LjRhSDQuCDQviDQvdC40YUsINC+INC90LjRhSDQuCDQviAnICtcclxuJ9C90LjRhS4g0J3QtdC70YzQt9GPINGD0YHRgtC+0Y/RgtGMLCDQvdC10LLQvtC30LzQvtC20L3QviDQt9Cw0LHRi9GC0YwuLi4g0J3QuNC60L7Qs9C00LAg0L3QtSDQtNGD0LzQsNC7LCDRh9GC0L4g0LHRg9C70L7Rh9C60Lgg0LzQvtCz0YPRgiDQsdGL0YLRjCAnICtcclxuJ9GC0LDQutC40LzQuCDQvNGP0LPQutC40LzQuCwg0LrQvtGC0LvQtdGC0LrQsCDRgtCw0LrQvtC5INGB0L7Rh9C90L7QuSwg0LAg0YHRi9GAINGC0LDQutC40Lwg0YDQsNGB0L/Qu9Cw0LLQu9C10L3QvdGL0LwuJztcclxuJCgnLnJldmlld3NfX2J0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgY29uc3QgJHRoaXMgPSAkKHRoaXMpO1xyXG4gIGNvbnN0IHRleHRXcmFwcGVyID0gJHRoaXMuY2xvc2VzdCgnLnJldmlld3NfX2l0ZW0tdGV4dCcpO1xyXG4gIGNvbnN0IHJldmlld3NOYW1lID0gdGV4dFdyYXBwZXIuZmluZCgnLnJldmlld3NfX25hbWUnKS5jbG9uZSgpO1xyXG4gIFxyXG5cclxuICBjb25zdCBtb2RhbEJnID0gJCgnPGRpdj4nLCB7IGNsYXNzOiAnbW9kYWxfX2JnJyB9KTtcclxuICBjb25zdCBtb2RhbCA9ICAgICAkKCc8ZGl2PicsIHsgY2xhc3M6ICdtb2RhbCcgfSk7XHJcbiAgY29uc3QgbW9kYWxUZXh0ID0gJCgnPHA+JywgeyBjbGFzczogJ3Jldmlld3NfX3RleHQgbW9kYWxfX3RleHQnIH0pO1xyXG4gIGNvbnN0IG1vZGFsQ2xvc2UgPSAkKCc8YT4nLCB7XHJcbiAgICBjbGFzczogJ292ZXJsYXlfX2Nsb3NlIG1vZGFsX19jbG9zZScsIFxyXG4gICAgaHJlZjogJyMnXHJcbiAgfSk7XHJcbiAgJCgnYm9keScpLmFwcGVuZChtb2RhbEJnLmFwcGVuZChtb2RhbCkpO1xyXG4gIG1vZGFsQmcuZmFkZUluKDUwMCk7XHJcbiAgbW9kYWxUZXh0LnRleHQocmV2aWV3c1RleHQpO1xyXG4gIG1vZGFsLmFwcGVuZChyZXZpZXdzTmFtZSk7XHJcbiAgbW9kYWwuYXBwZW5kKG1vZGFsVGV4dCk7XHJcbiAgbW9kYWwuYXBwZW5kKG1vZGFsQ2xvc2UpO1xyXG4gIFxyXG4gIG1vZGFsQmcub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBvdXJUYXJnZXQgPSBldmVudC50YXJnZXQ7XHJcbiAgICBpZiAoJChvdXJUYXJnZXQpLmhhc0NsYXNzKCdtb2RhbF9fYmcnKSl7XHJcbiAgICAgIG1vZGFsQmcuZmFkZU91dCg1MDAsICgpID0+IG1vZGFsQmcucmVtb3ZlKCkpO1xyXG4gICAgfVxyXG4gIH0pXHJcbiAgbW9kYWxDbG9zZS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXYpIHtcclxuICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBtb2RhbEJnLmZhZGVPdXQoNTAwLCAoKSA9PiBtb2RhbEJnLnJlbW92ZSgpKTtcclxuICB9KVxyXG4gIFxyXG59KTtcclxuXHJcbiJdfQ==
